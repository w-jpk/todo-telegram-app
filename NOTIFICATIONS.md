# üîî –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç?

**–í–∞–∂–Ω–æ:** –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ —Å–µ—Ä–≤–∏—Å. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ HTTP API endpoints, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø–æ –∑–∞–ø—Ä–æ—Å—É.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:

1. **Telegram Bot API** - —ç—Ç–æ REST API –æ—Ç Telegram, –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø–æ –∞–¥—Ä–µ—Å—É `https://api.telegram.org/bot{TOKEN}/...`
2. **–¢–æ–∫–µ–Ω –±–æ—Ç–∞** (`TELEGRAM_BOT_TOKEN`) —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. **API endpoints** –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–µ–ª–∞—é—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ Telegram Bot API –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫** (`server/plugins/scheduler.ts`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ VPS

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã:

1. –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
2. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ `.env`: `TELEGRAM_BOT_TOKEN=your_token_here`
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º (—á—Ç–æ–±—ã –±–æ—Ç –º–æ–≥ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è)
5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ VPS - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á –Ω–∞ –æ—Å–Ω–æ–≤–µ `node-cron`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ VPS.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ VPS (—á–µ—Ä–µ–∑ PM2, Docker –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–∞–≥–∏–Ω `server/plugins/scheduler.ts`
2. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏ cron, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
3. –ó–∞–¥–∞—á–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –ø–æ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
4. –ù–µ –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π cron - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π cron
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**
- **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 UTC
- **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 7:00 UTC (10:00 –ú–°–ö)
- **–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 UTC

**–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```
ENABLE_SCHEDULER=true
```

**–ù–∞ VPS:**
–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
```bash
# –° PM2
pm2 start .output/server/index.mjs --name todo-app

# –ò–ª–∏ —Å Docker
docker-compose up -d

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
node .output/server/index.mjs
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö:
```
‚úÖ Notification scheduler initialized
   - Daily notifications: every day at 9:00 AM UTC
   - Reminders: every day at 7:00 AM UTC (10:00 MSK)
   - Overdue notifications: every day at 9:00 AM UTC
```

## –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 1. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (`/api/notifications/daily`)

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤–∫–ª—é—á–µ–Ω—ã –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

**–ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (—á–µ—Ä–µ–∑ cron job)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è: 9:00 —É—Ç—Ä–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron:**
```bash
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00
0 9 * * * curl -X POST https://your-domain.com/api/notifications/daily
```

### 2. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (`/api/notifications/reminders`)

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–∞–¥–∞—á–∞—Ö –∑–∞ N –¥–Ω–µ–π –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞.

**–ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (—á–µ—Ä–µ–∑ cron job)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è: 9:00 —É—Ç—Ä–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron:**
```bash
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00
0 9 * * * curl -X POST https://your-domain.com/api/notifications/reminders
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 1 –¥–µ–Ω—å –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö (`/api/notifications/overdue`)

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

**–ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (—á–µ—Ä–µ–∑ cron job)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è: 9:00 —É—Ç—Ä–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron:**
```bash
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00
0 9 * * * curl -X POST https://your-domain.com/api/notifications/overdue
```

### 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö).

### 5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ç–º–µ—Ç–∫–µ –∑–∞–¥–∞—á–∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö).

### 6. –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (`/api/notifications/send`)

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -X POST https://your-domain.com/api/notifications/send \
  -H "Content-Type: application/json" \
  -d '{
    "userId": 123456789,
    "message": "–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
  }'
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ API:

### –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
GET /api/settings
Headers: x-telegram-user-id: {userId}
```

### –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
PUT /api/settings
Headers: x-telegram-user-id: {userId}
Body: {
  "notificationsEnabled": true,
  "dailyNotifications": true,
  "dailyNotificationTime": "09:00:00",
  "reminderDaysBefore": [1],
  "notifyOnCreate": false,
  "notifyOnUpdate": false,
  "notifyOnOverdue": true,
  "timezone": "Europe/Moscow"
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫:

- `notificationsEnabled` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `dailyNotifications` - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–¥–∞—á–∞—Ö –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
- `dailyNotificationTime` - –≤—Ä–µ–º—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Ñ–æ—Ä–º–∞—Ç HH:mm:ss)
- `reminderDaysBefore` - –º–∞—Å—Å–∏–≤ –¥–Ω–µ–π –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞ –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, [1, 3] = –∑–∞ 1 –∏ 3 –¥–Ω—è)
- `notifyOnCreate` - —É–≤–µ–¥–æ–º–ª—è—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏
- `notifyOnUpdate` - —É–≤–µ–¥–æ–º–ª—è—Ç—å –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏
- `notifyOnOverdue` - —É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
- `timezone` - —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 1: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ VPS.**

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
# –° PM2
pm2 start .output/server/index.mjs --name todo-app

# –ò–ª–∏ —Å Docker
docker-compose up -d

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
node .output/server/index.mjs
```

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ 9:00 UTC
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ 9:00 UTC
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö –≤ 9:00 UTC

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:**
–ò–∑–º–µ–Ω–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ `server/plugins/scheduler.ts`:
```typescript
// –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è 10:00 –ø–æ –ú–æ—Å–∫–≤–µ (UTC+3 = 7:00 UTC)
cron.schedule('0 7 * * *', async () => {
  // ...
}, { timezone: 'Europe/Moscow' })
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í–Ω–µ—à–Ω–∏–π cron job (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π cron –≤–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞:

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab (crontab -e)
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ 9:00
0 9 * * * curl -X POST https://your-domain.com/api/notifications/daily

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ 9:00
0 9 * * * curl -X POST https://your-domain.com/api/notifications/reminders

# –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ 9:00
0 9 * * * curl -X POST https://your-domain.com/api/notifications/overdue
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–Ω–µ—à–Ω–∏–π cron, –æ—Ç–∫–ª—é—á–∏—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, —É–¥–∞–ª–∏–≤ –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–≤ —Ñ–∞–π–ª `server/plugins/scheduler.ts`.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

#### Cron-job.org
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [cron-job.org](https://cron-job.org)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
3. URL: `https://your-domain.com/api/notifications/daily`
4. –ú–µ—Ç–æ–¥: POST
5. –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00

#### EasyCron
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [EasyCron](https://www.easycron.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
3. URL: `https://your-domain.com/api/notifications/daily`
4. –ú–µ—Ç–æ–¥: POST
5. –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00

#### Zapier
1. –°–æ–∑–¥–∞–π—Ç–µ Zap
2. –¢—Ä–∏–≥–≥–µ—Ä: Schedule by Zapier (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 9:00)
3. –î–µ–π—Å—Ç–≤–∏–µ: Webhook (POST –∑–∞–ø—Ä–æ—Å)
4. URL: `https://your-domain.com/api/notifications/daily`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `user_settings`

```sql
CREATE TABLE user_settings (
  user_id BIGINT PRIMARY KEY,
  notifications_enabled BOOLEAN DEFAULT TRUE,
  daily_notifications BOOLEAN DEFAULT TRUE,
  daily_notification_time TIME DEFAULT '09:00:00',
  reminder_days_before INTEGER[] DEFAULT ARRAY[1],
  notify_on_create BOOLEAN DEFAULT FALSE,
  notify_on_update BOOLEAN DEFAULT FALSE,
  notify_on_overdue BOOLEAN DEFAULT TRUE,
  timezone VARCHAR(50) DEFAULT 'UTC',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```bash
curl -X POST https://your-domain.com/api/notifications/send \
  -H "Content-Type: application/json" \
  -d '{
    "userId": 123456789,
    "message": "üîî <b>–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</b>\n\n–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ."
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
curl -X GET https://your-domain.com/api/settings \
  -H "x-telegram-user-id: 123456789"
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

```bash
curl -X PUT https://your-domain.com/api/settings \
  -H "x-telegram-user-id: 123456789" \
  -H "Content-Type: application/json" \
  -d '{
    "dailyNotifications": true,
    "dailyNotificationTime": "08:00:00",
    "reminderDaysBefore": [1]
  }'
```

## –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

–í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç HTML-—Ä–∞–∑–º–µ—Ç–∫—É:

- `<b>—Ç–µ–∫—Å—Ç</b>` - –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
- `<i>—Ç–µ–∫—Å—Ç</i>` - –∫—É—Ä—Å–∏–≤
- `<code>–∫–æ–¥</code>` - –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- `<a href="url">—Å—Å—ã–ª–∫–∞</a>` - —Å—Å—ã–ª–∫–∞

–≠–º–æ–¥–∑–∏ –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:
- üî¥ - –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- üü° - —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- üîµ - –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

## Troubleshooting

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –û—à–∏–±–∫–∞ "Bot token is not configured"

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

### –û—à–∏–±–∫–∞ "Chat not found"

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É `/start` –≤ Telegram.

